!! Building configuration
!! IOS XR Configuration 24.3.2
!! Last configuration change at Mon Mar 24 22:33:43 2025 by admin
!
hostname GW
banner motd %
*********************************************************
*                                                       *
*                   NaaS VirtualLab                     *
*                                                       *
*********************************************************
%
username admin
 group root-lr
 group cisco-support
 secret 10 $6$QV8uZ1cWStcLCZ1.$/Szlc2yABk1hQI82c8cfWfwd.sZU30WwtjP.EWJyNSG.NtpP.323/468m4fi5KFsmH2zRWYY.gArKk/n95T9K/
!
vrf internet
 address-family ipv6 unicast
  import from default-vrf route-policy import-bgp
  import route-target
   64577:8888
  !
  export route-target
   64577:8888
  !
 !
!
interface Loopback0
 ipv4 address 6.0.3.34 255.255.255.255
 ipv6 address fcdd:dd00:3ea::1/128
!
interface Loopback34
 ipv6 address 2222:3434::1/128
!
interface MgmtEth0/RP0/CPU0/0
 ipv4 address 172.16.255.7 255.255.255.192
!
interface GigabitEthernet0/0/0/0
 description "to AGG2-Gi0/0/0/3"
 ipv4 point-to-point
 ipv4 unnumbered Loopback0
 ipv6 enable
 lldp
  enable
 !
 shutdown
!
interface GigabitEthernet0/0/0/1
 description "to AGG1-Gi0/0/0/3"
 ipv4 point-to-point
 ipv4 unnumbered Loopback0
 ipv6 enable
 lldp
  enable
 !
!
rd-set auto
end-set
!
prefix-set naas-cpe-prefix
  fcdd:dd00:301::/48
end-set
!
prefix-set legal-ipv6-prefix
  2222::/16 ge 16,
  2001::/16 ge 16
end-set
!
route-policy naas-cpe
  if destination in naas-cpe-prefix then
    pass
  endif
end-policy
!
route-policy pass-all
  pass
end-policy
!
route-policy import-bgp
  if destination in legal-ipv6-prefix then
    pass
  endif
end-policy
!
route-policy no-naas-cpe
  if destination in naas-cpe-prefix then
    drop
  else
    pass
  endif
end-policy
!
router isis BELL
 is-type level-1
 net 49.0001.fccc.cc00.0304.00
 log adjacency changes
 address-family ipv4 unicast
  metric-style wide
  advertise passive-only
  spf-interval initial-wait 50 secondary-wait 150 maximum-wait 5000
  maximum-paths 64
  router-id Loopback0
  segment-routing mpls sr-prefer
 !
 address-family ipv6 unicast
  metric-style wide
  advertise passive-only
  spf-interval initial-wait 50 secondary-wait 150 maximum-wait 5000
  maximum-paths 64
  router-id Loopback0
  redistribute bgp 64577 level-1 metric 30 route-policy naas-cpe metric-type external
  segment-routing srv6
   locator Locator0
   !
  !
 !
 interface Loopback0
  passive
  address-family ipv4 unicast
   prefix-sid index 34
  !
  address-family ipv6 unicast
   disable
  !
 !
 interface GigabitEthernet0/0/0/0
  point-to-point
  hello-padding disable
  address-family ipv4 unicast
  !
  address-family ipv6 unicast
  !
 !
 interface GigabitEthernet0/0/0/1
  point-to-point
  hello-padding disable
  address-family ipv4 unicast
  !
  address-family ipv6 unicast
  !
 !
!
router bgp 64577
 bgp router-id 6.0.3.34
 bgp update-delay 5
 bgp redistribute-internal
 ibgp policy out enforce-modifications
 address-family ipv4 unicast
  label mode per-vrf
  segment-routing srv6
   locator Locator0
   alloc mode per-vrf
  !
  redistribute connected
  allocate-label all
 !
 address-family vpnv4 unicast
  bgp label-delay 1 0
  bgp import-delay 1 0
 !
 address-family ipv6 unicast
  label mode per-vrf
  segment-routing srv6
   locator Locator0
   alloc mode per-vrf
  !
  network 2222:3434::1/128
  allocate-label all
 !
 neighbor 6.0.0.6
  remote-as 64577
  description "to iRRv4"
  update-source Loopback0
  address-family ipv4 labeled-unicast
   next-hop-self
  !
  address-family vpnv4 unicast
   import reoriginate stitching-rt
   soft-reconfiguration inbound always
  !
  address-family ipv6 labeled-unicast
   next-hop-self
  !
 !
 neighbor fccc:cc00:6611::1
  remote-as 64577
  description to iRRv6
  update-source Loopback0
  address-family ipv4 unicast
   route-reflector-client
   encapsulation-type srv6
   soft-reconfiguration inbound always
  !
  address-family ipv6 unicast
   route-policy no-naas-cpe in
   route-reflector-client
   encapsulation-type srv6
   route-policy pass-all out
   soft-reconfiguration inbound always
  !
 !
!
mpls oam
!
segment-routing
 global-block 16000 81534
 srv6
  locators
   locator Locator0
    micro-segment behavior unode psp-usd
    prefix fcdd:dd00:3ea::/48
   !
  !
 !
!
mpls label range table 0 100000 1048575
ssh server v2
ssh server netconf vrf default
end
